<!doctype html>
<html lang="zh-TW">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>åº·è»’åœ‹èªå…­ä¸Šç”Ÿå­—çŒœè¬éŠæˆ²</title>
  <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', 'å¾®è»Ÿæ­£é»‘é«”', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            padding: 20px;
            color: white;
            gap: 30px;
            box-sizing: border-box;
        }

        .lesson-sidebar {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
        }

        .sidebar-title {
            font-size: 1.3rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 10px;
            color: #ffeaa7;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            writing-mode: horizontal-tb;
        }

        .lesson-btn {
            padding: 15px 25px;
            border: none;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            font-family: 'Microsoft JhengHei', 'å¾®è»Ÿæ­£é»‘é«”', sans-serif;
            writing-mode: horizontal-tb;
            text-align: center;
        }

        .lesson-btn:hover {
            background: rgba(255,255,255,0.35);
            transform: translateX(5px);
            box-shadow: 0 4px 15px rgba(255,255,255,0.2);
        }

        .lesson-btn.active {
            background: linear-gradient(135deg, #ffeaa7, #fdcb6e);
            color: #2d3436;
            border: 2px solid #fdcb6e;
            box-shadow: 0 4px 15px rgba(253, 203, 110, 0.4);
        }

        .main-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .question-counter {
            color: #ffeaa7;
            font-weight: bold;
            margin-left: 10px;
        }

        .game-container {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 10px auto;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .character-card {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18rem;
            font-weight: normal;
            color: #2d3436;
            font-family: 'æ¨™æ¥·é«”', 'DFKai-SB', serif;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .overlay-grid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            grid-template-rows: 1fr 1fr 1fr;
            gap: 0;
        }

        .overlay-block {
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
        }

        .overlay-block:hover {
            transform: scale(0.95);
            filter: brightness(1.1);
        }

        .overlay-block.clicked {
            opacity: 0;
            pointer-events: none;
        }

        .block-1 {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
        }

        .block-2 {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
        }

        .block-3 {
            background: linear-gradient(135deg, #ffeaa7, #fdcb6e);
        }

        .block-4 {
            background: linear-gradient(135deg, #a29bfe, #6c5ce7);
        }

        .block-5 {
            background: linear-gradient(135deg, #fd79a8, #e84393);
        }

        .block-6 {
            background: linear-gradient(135deg, #fab1a0, #e17055);
        }

        .block-7 {
            background: linear-gradient(135deg, #00b894, #00cec9);
        }

        .block-8 {
            background: linear-gradient(135deg, #fdcb6e, #e17055);
        }

        .block-9 {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #ffeaa7, #fdcb6e);
            color: #2d3436;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(253, 203, 110, 0.4);
        }

        .btn-secondary {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
        }

        .btn-secondary:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }

        .completion-message {
            background: rgba(46, 213, 115, 0.9);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            margin-top: 20px;
            backdrop-filter: blur(10px);
            display: none;
            max-width: 400px;
        }

        .completion-message.show {
            display: block;
            animation: celebration 0.8s ease-out;
        }

        @keyframes celebration {
            0% {
                opacity: 0;
                transform: scale(0.8) translateY(20px);
            }
            50% {
                transform: scale(1.05) translateY(-5px);
            }
            100% {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .block-number {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.3);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            body {
                flex-direction: column;
                gap: 20px;
            }

            .lesson-sidebar {
                flex-direction: row;
                overflow-x: auto;
                width: 100%;
                padding: 15px;
            }

            .sidebar-title {
                display: none;
            }

            .lesson-btn {
                padding: 10px 15px;
                font-size: 0.9rem;
                white-space: nowrap;
            }

            .game-container {
                width: 250px;
                height: 250px;
            }
            
            .character-card {
                font-size: 15rem;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .overlay-block {
                font-size: 1.2rem;
            }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div class="lesson-sidebar">
   <div class="sidebar-title">
    ğŸ“š é¸æ“‡èª²ç¨‹
   </div><button class="lesson-btn" onclick="switchLesson(7)">ç¬¬ä¸ƒèª²</button> <button class="lesson-btn active" onclick="switchLesson(8)">ç¬¬å…«èª²</button> <button class="lesson-btn" onclick="switchLesson(9)">ç¬¬ä¹èª²</button> <button class="lesson-btn" onclick="switchLesson(10)">ç¬¬åèª²</button> <button class="lesson-btn" onclick="switchLesson(11)">ç¬¬åä¸€èª²</button> <button class="lesson-btn" onclick="switchLesson(12)">ç¬¬åäºŒèª²</button>
  </div>
  <div class="main-content">
   <div class="header">
    <h1 id="mainTitle">ğŸ¯ åº·è»’åœ‹èªå…­ä¸Šç¬¬å…«èª²ç”Ÿå­—çŒœè¬</h1>
    <p>é»æ“Šå½©è‰²å€å¡Šï¼Œé€æ­¥æ­ç¤ºéš±è—çš„ä¸­æ–‡å­—ï¼<span id="questionCounter" class="question-counter">(ç¬¬ 1 é¡Œ / å…± 19 é¡Œ)</span></p>
   </div>
   <div class="game-container">
    <div class="character-card">
     éš™
    </div>
    <div class="overlay-grid">
     <div class="overlay-block block-1" onclick="revealBlock(1)">
      <div class="block-number">
       1
      </div>
      <div>
       é»æˆ‘
      </div>
     </div>
     <div class="overlay-block block-2" onclick="revealBlock(2)">
      <div class="block-number">
       2
      </div>
      <div>
       é»æˆ‘
      </div>
     </div>
     <div class="overlay-block block-3" onclick="revealBlock(3)">
      <div class="block-number">
       3
      </div>
      <div>
       é»æˆ‘
      </div>
     </div>
     <div class="overlay-block block-4" onclick="revealBlock(4)">
      <div class="block-number">
       4
      </div>
      <div>
       é»æˆ‘
      </div>
     </div>
     <div class="overlay-block block-5" onclick="revealBlock(5)">
      <div class="block-number">
       5
      </div>
      <div>
       é»æˆ‘
      </div>
     </div>
     <div class="overlay-block block-6" onclick="revealBlock(6)">
      <div class="block-number">
       6
      </div>
      <div>
       é»æˆ‘
      </div>
     </div>
     <div class="overlay-block block-7" onclick="revealBlock(7)">
      <div class="block-number">
       7
      </div>
      <div>
       é»æˆ‘
      </div>
     </div>
     <div class="overlay-block block-8" onclick="revealBlock(8)">
      <div class="block-number">
       8
      </div>
      <div>
       é»æˆ‘
      </div>
     </div>
     <div class="overlay-block block-9" onclick="revealBlock(9)">
      <div class="block-number">
       9
      </div>
      <div>
       é»æˆ‘
      </div>
     </div>
    </div>
   </div>
   <div class="controls"><button class="btn btn-secondary" onclick="resetGame()">ğŸ”„ é‡æ–°é–‹å§‹</button> <button class="btn btn-primary" onclick="revealAll()">ğŸ‘ï¸ å…¨éƒ¨é¡¯ç¤º</button> <button class="btn btn-secondary" onclick="newCharacter()">ğŸ² ä¸‹ä¸€é¡Œ</button>
   </div>
   <div class="completion-message" id="completionMessage">
    <h2>ğŸ‰ æ­å–œå®Œæˆï¼</h2>
    <p>ä½ æˆåŠŸæ­ç¤ºäº†å®Œæ•´çš„å­—ï¼š<strong style="font-size: 2rem; color: #ffeaa7;">éš™</strong></p>
    <p>é€™å€‹å­—çš„æ„æ€æ˜¯ã€Œç¸«éš™ã€ç©ºéš™ã€</p>
    <div style="margin-top: 15px;"><button class="btn btn-primary" onclick="resetGame()" style="margin: 5px;">å†ç©ä¸€æ¬¡</button> <button class="btn btn-secondary" onclick="newCharacter()" style="margin: 5px;">ä¸‹ä¸€é¡Œ</button>
    </div>
   </div>
  </div>
  <script>
        let revealedBlocks = new Set();
        let totalBlocks = 9;
        let currentLesson = 8;
        
        // æ‰€æœ‰èª²ç¨‹çš„å­—åº«
        const lessonData = {
            7: [
                { char: 'ä»°', meaning: 'å‘ä¸Šçœ‹ã€æ•¬æ…•' },
                { char: 'ç·¬', meaning: 'æ‡·å¿µã€ç·¬æ‡·' },
                { char: 'ç”¸', meaning: 'ç·¬ç”¸ã€åœ°å' },
                { char: 'è¸', meaning: 'è…³è¸' },
                { char: 'çµ¨', meaning: 'çµ¨æ¯›ã€æŸ”è»Ÿ' },
                { char: 'ï¿½ï¿½ï¿½ï¿½', meaning: 'æ¿ºèµ·ã€é£›æ¿º' },
                { char: 'è¥¬', meaning: 'è£™è¥¬ã€æ“ºå‹•' },
                { char: 'å¼„', meaning: 'ç©å¼„ã€æˆ²å¼„' },
                { char: 'æ£', meaning: 'æ”¾ç¸±ã€ä»»æ„' },
                { char: 'æ‰¹', meaning: 'æ‰¹è©•ã€æ‰¹æ”¹' },
                { char: 'å¾‘', meaning: 'å°è·¯ã€ç›´æ¥' },
                { char: 'è¬¹', meaning: 'è¬¹æ…ã€å°å¿ƒ' },
                { char: 'æ°', meaning: 'æ°å¥½ã€æ­£å¥½' },
                { char: 'ä¹', meaning: 'ç¼ºä¹ã€ç–²ä¹' },
                { char: 'çš†', meaning: 'éƒ½ã€å…¨éƒ¨' },
                { char: 'å—¤', meaning: 'å—¤ç¬‘ã€è­ç¬‘' },
                { char: 'å—¯', meaning: 'è¡¨ç¤ºæ‡‰ç­”' }
            ],
            8: [
                { char: 'éš™', meaning: 'ç¸«éš™ã€ç©ºéš™' },
                { char: 'ç«„', meaning: 'é€ƒè·‘ã€äº‚è·‘' },
                { char: 'æ—¨', meaning: 'æ„æ€ã€å®—æ—¨' },
                { char: 'æ‚ ', meaning: 'æ‚ é–’ã€é•·ä¹…' },
                { char: 'å¯“', meaning: 'å¯„å±…ã€å¯“è¨€' },
                { char: 'é·¸', meaning: 'æ°´é³¥ã€é·¸èšŒç›¸çˆ­' },
                { char: 'ç‹¡', meaning: 'ç‹¡çŒ¾ã€è©­è©' },
                { char: 'çªŸ', meaning: 'æ´ç©´ã€çªŸçª¿' },
                { char: 'çŒ¾', meaning: 'ç‹¡çŒ¾ã€åœ“æ»‘' },
                { char: 'é¨™', meaning: 'æ¬ºé¨™ã€è©é¨™' },
                { char: 'å½', meaning: 'è™›å‡ã€å½è£' },
                { char: 'èª‡', meaning: 'èª‡å¼µã€èª‡å¤§' },
                { char: 'è¾¨', meaning: 'è¾¨åˆ¥ã€åˆ†è¾¨' },
                { char: 'è¬Š', meaning: 'èªªè¬Šã€è¬Šè¨€' },
                { char: 'è«·', meaning: 'è«·åˆºã€è«·å–»' },
                { char: 'æƒ•', meaning: 'è­¦æƒ•ã€è­¦æˆ’' },
                { char: 'å¯Ÿ', meaning: 'è§€å¯Ÿã€å¯Ÿè¦º' },
                { char: 'è”½', meaning: 'é®è”½ã€éš±è”½' },
                { char: 'è™›', meaning: 'ç©ºè™›ã€è™›å‡' }
            ],
            9: [
                { char: 'äº­', meaning: 'äº­å­ã€æ¶¼äº­' },
                { char: 'æ”¯', meaning: 'æ”¯æŒã€æ”¯æ’' },
                { char: 'èª˜', meaning: 'èª˜æƒ‘ã€å¼•èª˜' },
                { char: 'ç¸£', meaning: 'ç¸£å¸‚ã€è¡Œæ”¿å€' },
                { char: 'æ‡¿', meaning: 'ç¾å¥½ã€å¾·è¡Œ' },
                { char: 'é­', meaning: 'åœ‹åã€å§“æ°' },
                { char: 'æ——', meaning: 'æ——å¹Ÿã€æ——å­' },
                { char: 'å¹Ÿ', meaning: 'æ——å¹Ÿã€æ¨™èªŒ' },
                { char: 'å´—', meaning: 'å´—ä½ã€å±±å´—' },
                { char: 'å§“', meaning: 'å§“æ°ã€å§“å' },
                { char: 'å€˜', meaning: 'å€˜è‹¥ã€å‡å¦‚' },
                { char: 'åƒ®', meaning: 'åƒ•äººã€ç«¥åƒ•' },
                { char: 'è–°', meaning: 'è–°é¦™ã€è–°é™¶' },
                { char: 'æ’¤', meaning: 'æ’¤é€€ã€æ’¤å›' },
                { char: 'è«¸', meaning: 'çœ¾å¤šã€å„å€‹' },
                { char: 'è‘›', meaning: 'è«¸ï¿½ï¿½ã€æ¤ç‰©' },
                { char: 'æ…', meaning: 'è¬¹æ…ã€å°å¿ƒ' },
                { char: 'ä¸', meaning: 'ä¸ç›¸ã€è¼”ä½' }
            ],
            10: [
                { char: 'è€¶', meaning: 'èªåŠ©è©ã€ç–‘å•' },
                { char: 'éƒŠ', meaning: 'éƒŠå¤–ã€éƒŠå€' },
                { char: 'æ…ˆ', meaning: 'æ…ˆæ„›ã€ä»æ…ˆ' },
                { char: 'ç¥¥', meaning: 'ç¥¥å’Œã€å‰ç¥¥' },
                { char: 'åŠˆ', meaning: 'åŠˆé–‹ã€åˆ†é–‹' },
                { char: 'å•ª', meaning: 'å•ªçš„ä¸€è²' },
                { char: 'é›¶', meaning: 'é›¶ç¢ã€æ•¸å­—é›¶' },
                { char: 'å­', meaning: 'å­æƒ¡ã€è¨å­' },
                { char: 'å€¦', meaning: 'ç–²å€¦ã€å­å€¦' },
                { char: 'è¾¯', meaning: 'è¾¯è«–ã€è¾¯è§£' },
                { char: 'ç§', meaning: 'ç§äººã€è‡ªç§' },
                { char: 'è²§', meaning: 'è²§çª®ã€ç¼ºä¹' },
                { char: 'ä¿‚', meaning: 'é—œä¿‚ã€æ˜¯' },
                { char: 'è¶', meaning: 'è¶æ©Ÿã€ï¿½ï¿½ï¿½ï¿½ï¿½' },
                { char: 'ç¨', meaning: 'ç¨å¾®ã€ç•¥å¾®' },
                { char: 'çƒ˜', meaning: 'çƒ˜çƒ¤ã€çƒ˜ç„™' },
                { char: 'è¡·', meaning: 'å…§å¿ƒã€ç”±è¡·' },
                { char: 'é‹¼', meaning: 'é‹¼éµã€å …ç¡¬' }
            ],
            11: [
                { char: 'æ¥“', meaning: 'æ¥“æ¨¹ã€æ¥“è‘‰' },
                { char: 'æ¢', meaning: 'æ¢å¾©ã€å»£å¤§' },
                { char: 'æ½‘', meaning: 'æ½‘æ°´ã€æ´»æ½‘' },
                { char: 'è“', meaning: 'è‰è“ã€è“æœ' },
                { char: 'å»³', meaning: 'å®¢å»³ã€å¤§å»³' },
                { char: 'é¡', meaning: 'é¡é ­ã€æ•¸é¡' },
                { char: 'çŒ', meaning: 'çŒæº‰ã€çŒè¼¸' },
                { char: 'é†‰', meaning: 'é†‰é…’ã€é™¶é†‰' },
                { char: 'é‡€', meaning: 'é‡€é€ ã€é‡€é…’' },
                { char: 'æ›¿', meaning: 'æ›¿ä»£ã€ä»£æ›¿' },
                { char: 'è«’', meaning: 'è«’è§£ã€åŸè«’' },
                { char: 'è„£', meaning: 'å˜´ï¿½ï¿½ã€è„£é½’' },
                { char: 'å¥”', meaning: 'å¥”è·‘ã€å¥”é¦³' },
                { char: 'ä¹', meaning: 'ä¹æ±‚ã€ä¹è¨' },
                { char: 'æŸ', meaning: 'æŸäººã€æŸå€‹' },
                { char: 'ç…¥', meaning: 'ç…¥ç™¼ã€å…‰ç…¥' },
                { char: 'æ©‡', meaning: 'é›ªæ©‡ã€æ»‘æ©‡' },
                { char: 'éˆ´', meaning: 'éˆ´éºã€éˆ´è²' },
                { char: 'è¿´', meaning: 'è¿´è½‰ã€è¿´æ—‹' }
            ],
            12: [
                { char: 'ç•°', meaning: 'å¥‡ç•°ã€ä¸åŒ' },
                { char: 'é °', meaning: 'è‡‰é °ã€é¢é °' },
                { char: 'è“¬', meaning: 'è“¬é¬†ã€è“¬å‹ƒ' },
                { char: 'å‹ƒ', meaning: 'å‹ƒç™¼ã€æ—ºç››' },
                { char: 'é€›', meaning: 'é€›è¡—ã€é–’é€›' },
                { char: 'åº­', meaning: 'åº­é™¢ã€åº­åœ’' },
                { char: 'è‚…', meaning: 'åš´è‚…ã€è‚…éœ' },
                { char: 'è–”', meaning: 'ï¿½ï¿½ï¿½è–‡ã€èŠ±å' },
                { char: 'è–‡', meaning: 'è–”è–‡ã€æ¤ç‰©' },
                { char: 'ç€°', meaning: 'ç€°æ¼«ã€å……æ»¿' },
                { char: 'åˆ®', meaning: 'åˆ®é¢¨ã€åˆ®å‰Š' },
                { char: 'æ‹¬', meaning: 'åŒ…æ‹¬ã€æ‹¬è™Ÿ' },
                { char: 'è', meaning: 'èèŸ»ã€æ˜†èŸ²' },
                { char: 'èŸ»', meaning: 'èèŸ»ã€æ˜†èŸ²' },
                { char: 'å„˜', meaning: 'å„˜ç®¡ã€å„˜é‡' }
            ]
        };
        
        let characters = lessonData[8];
        let currentCharacterIndex = 0;
        let shuffledIndices = [];
        let currentQuestionNumber = 0;

        // åˆå§‹åŒ–éš¨æ©Ÿé †åº
        function initializeRandomOrder() {
            shuffledIndices = [];
            for (let i = 0; i < characters.length; i++) {
                shuffledIndices.push(i);
            }
            // Fisher-Yates æ´—ç‰Œç®—æ³•
            for (let i = shuffledIndices.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffledIndices[i], shuffledIndices[j]] = [shuffledIndices[j], shuffledIndices[i]];
            }
            currentQuestionNumber = 0;
            currentCharacterIndex = shuffledIndices[currentQuestionNumber];
            updateDisplay();
        }

        function switchLesson(lessonNumber) {
            currentLesson = lessonNumber;
            characters = lessonData[lessonNumber];
            
            // æ›´æ–°æ¨™é¡Œ
            document.getElementById('mainTitle').textContent = `ğŸ¯ åº·è»’åœ‹èªå…­ä¸Šç¬¬${convertNumberToChinese(lessonNumber)}èª²ç”Ÿå­—çŒœè¬`;
            
            // æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
            document.querySelectorAll('.lesson-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // é‡ç½®éŠæˆ²ä¸¦åˆå§‹åŒ–æ–°èª²ç¨‹
            resetGame();
            initializeRandomOrder();
        }

        function convertNumberToChinese(num) {
            const chinese = ['', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­', 'ä¸ƒ', 'å…«', 'ä¹', 'å', 'åä¸€', 'åäºŒ'];
            return chinese[num];
        }

        function revealBlock(blockNumber) {
            if (revealedBlocks.has(blockNumber)) return;
            
            const block = document.querySelector(`.block-${blockNumber}`);
            block.classList.add('clicked');
            revealedBlocks.add(blockNumber);
            
            if (revealedBlocks.size === totalBlocks) {
                setTimeout(showCompletion, 500);
            }
        }

        function showCompletion() {
            document.getElementById('completionMessage').classList.add('show');
        }

        function resetGame() {
            revealedBlocks.clear();
            
            // é‡ç½®æ‰€æœ‰å€å¡Š
            for (let i = 1; i <= totalBlocks; i++) {
                const block = document.querySelector(`.block-${i}`);
                block.classList.remove('clicked');
            }
            
            document.getElementById('completionMessage').classList.remove('show');
        }

        function revealAll() {
            // ç›´æ¥ç§»é™¤æ‰€æœ‰å€å¡Šï¼Œç«‹å³é¡¯ç¤ºç­”æ¡ˆ
            for (let i = 1; i <= totalBlocks; i++) {
                const block = document.querySelector(`.block-${i}`);
                block.classList.add('clicked');
                revealedBlocks.add(i);
            }
            setTimeout(showCompletion, 300);
        }

        function updateDisplay() {
            const newChar = characters[currentCharacterIndex];
            
            // æ›´ï¿½ï¿½ï¿½å­—ç¬¦é¡¯ç¤º
            document.querySelector('.character-card').textContent = newChar.char;
            
            // æ›´æ–°é¡Œç›®è¨ˆæ•¸å™¨
            document.getElementById('questionCounter').textContent = `(ç¬¬ ${currentQuestionNumber + 1} é¡Œ / å…± ${characters.length} é¡Œ)`;
            
            // æ›´æ–°å®Œæˆè¨Šæ¯ä¸­çš„å­—ç¬¦å’Œæ„æ€
            const completionMsg = document.getElementById('completionMessage');
            completionMsg.innerHTML = `
                <h2>ğŸ‰ æ­å–œå®Œæˆï¼</h2>
                <p>ä½ æˆåŠŸæ­ç¤ºäº†å®Œæ•´çš„å­—ï¼š<strong style="font-size: 2rem; color: #ffeaa7;">${newChar.char}</strong></p>
                <p>é€™å€‹å­—çš„æ„æ€æ˜¯ã€Œ${newChar.meaning}ã€</p>
                <div style="margin-top: 15px;">
                    <button class="btn btn-primary" onclick="resetGame()" style="margin: 5px;">å†ç©ä¸€æ¬¡</button>
                    <button class="btn btn-secondary" onclick="newCharacter()" style="margin: 5px;">ä¸‹ä¸€é¡Œ</button>
                </div>
            `;
        }

        function newCharacter() {
            // å…ˆé‡ç½®æ‰€æœ‰å€å¡Šï¼Œç¢ºä¿é®è”½ä½å­—ç¬¦
            revealedBlocks.clear();
            document.getElementById('completionMessage').classList.remove('show');
            
            for (let i = 1; i <= totalBlocks; i++) {
                const block = document.querySelector(`.block-${i}`);
                block.classList.remove('clicked');
            }
            
            // å»¶é²0.5ç§’å¾Œå†æ›´æ–°å­—ç¬¦ï¼Œç¢ºä¿å€å¡Šå…ˆå®Œå…¨é¡¯ç¤º
            setTimeout(() => {
                // åˆ‡æ›åˆ°ä¸‹ä¸€å€‹å­—ç¬¦ï¼ˆéš¨æ©Ÿé †åºï¼‰
                currentQuestionNumber++;
                if (currentQuestionNumber >= characters.length) {
                    // å¦‚æœæ‰€æœ‰é¡Œç›®éƒ½åšå®Œäº†ï¼Œé‡æ–°æ´—ç‰Œ
                    initializeRandomOrder();
                } else {
                    currentCharacterIndex = shuffledIndices[currentQuestionNumber];
                    updateDisplay();
                }
            }, 500);
        }

        // éµç›¤å¿«æ·éµ
        document.addEventListener('keydown', function(event) {
            switch(event.key) {
                case '1':
                    revealBlock(1);
                    break;
                case '2':
                    revealBlock(2);
                    break;
                case '3':
                    revealBlock(3);
                    break;
                case '4':
                    revealBlock(4);
                    break;
                case '5':
                    revealBlock(5);
                    break;
                case '6':
                    revealBlock(6);
                    break;
                case '7':
                    revealBlock(7);
                    break;
                case '8':
                    revealBlock(8);
                    break;
                case '9':
                    revealBlock(9);
                    break;
                case 'r':
                case 'R':
                    resetGame();
                    break;
                case ' ':
                    event.preventDefault();
                    revealAll();
                    break;
                case 'n':
                case 'N':
                    newCharacter();
                    break;
            }
        });

        // åˆå§‹åŒ–
        initializeRandomOrder();
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a1c16c705874a40',t:'MTc2MzY4NTEzNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>