<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•¸å­¸æ‹”æ²³å¤§è³½ - è‡ªè¨‚é™¤æ³•æŒ‘æˆ°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        .animate-bounce-slow { animation: bounce 2s infinite; }
        @keyframes bounce {
          0%, 100% { transform: translate(-50%, -50%) scaleX(var(--scale-x, 1)) translateY(0); }
          50% { transform: translate(-50%, -50%) scaleX(var(--scale-x, 1)) translateY(-15%); }
        }
        @keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
        .animate-fade-in { animation: fade-in 0.2s ease-out forwards; }
        @keyframes pop-in { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
        .animate-pop-in { animation: pop-in 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
        
        /* è‡ªå®šç¾© Checkbox æ¨£å¼ */
        .custom-checkbox:checked {
            background-color: #f59e0b; /* amber-500 */
            border-color: #f59e0b;
        }
        .custom-checkbox:checked:after {
            content: 'âœ”';
            color: white;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.2rem;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- åœ–ç¤ºå…ƒä»¶ ---
        const Trophy = (props) => (
            <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6" /><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18" /><path d="M4 22h16" /><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 21" /><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 21" /><path d="M12 2a7 7 0 0 0-7 7v1h14v-1a7 7 0 0 0-7-7z" /></svg>
        );
        const RefreshCcw = (props) => (
            <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" /><path d="M3 3v5h5" /><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16" /><path d="M16 16h5v5" /></svg>
        );
        const HomeIcon = (props) => (
            <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
        );

        // --- æ•¸å­—éµç›¤å…ƒä»¶ ---
        const MiniKeypad = ({ onNumClick, color }) => {
            const btnColorClass = color === 'blue' 
                ? 'bg-blue-100 text-blue-700 hover:bg-blue-200 border-b-4 border-blue-300 active:border-b-0 active:translate-y-1' 
                : 'bg-pink-100 text-pink-700 hover:bg-pink-200 border-b-4 border-pink-300 active:border-b-0 active:translate-y-1';

            return (
                <div className="absolute top-full left-1/2 transform -translate-x-1/2 mt-4 z-30 bg-white p-3 rounded-xl shadow-2xl border border-gray-100 w-64 animate-fade-in">
                    <div className="grid grid-cols-5 gap-2">
                        {[1, 2, 3, 4, 5, 6, 7, 8, 9, 0].map((num) => (
                            <button
                                key={num}
                                onClick={(e) => { e.stopPropagation(); onNumClick(num); }}
                                className={`h-10 text-xl font-bold rounded-lg shadow-sm transition-all ${btnColorClass}`}
                            >
                                {num}
                            </button>
                        ))}
                    </div>
                </div>
            );
        };

        // --- è¼”åŠ©çµ„ä»¶ï¼šè¼¸å…¥æ–¹å¡Š ---
        const AnswerBox = ({ val, onClick, active, color, isCorrect, small = false }) => {
            let sizeClass = small ? "w-12 h-16 text-2xl" : "w-16 h-20 text-3xl";
            let baseClass = `${sizeClass} border-4 rounded-xl flex items-center justify-center font-bold cursor-pointer transition-all shrink-0`;
          
            if (isCorrect) {
                return (
                    <div className={`${baseClass} border-green-500 bg-green-100 text-green-700`}>
                        {val}
                    </div>
                );
            }

            const colorClass = color === 'blue' 
                ? (active ? "border-blue-500 bg-blue-100 ring-4 ring-blue-200" : "border-blue-300 bg-white hover:bg-blue-50")
                : (active ? "border-pink-500 bg-pink-100 ring-4 ring-pink-200" : "border-pink-300 bg-white hover:bg-pink-50");
          
            return (
                <div className={`${baseClass} ${colorClass}`} onClick={onClick}>
                    {val !== '' ? val : <span className="text-gray-300 text-2xl">?</span>}
                </div>
            );
        };

        // --- ä¸»ç¨‹å¼å…ƒä»¶ ---
        const App = () => {
            const [gamePhase, setGamePhase] = useState('menu'); // 'menu' | 'playing'
            
            // é¸å–®ç‹€æ…‹
            const [digits2, setDigits2] = useState(true);
            const [digits3, setDigits3] = useState(false);
            const [remainderYes, setRemainderYes] = useState(false);
            const [remainderNo, setRemainderNo] = useState(true);

            // éŠæˆ²è¨­å®š (é–‹å§‹éŠæˆ²æ™‚é–å®š)
            const [activeConfig, setActiveConfig] = useState(null);

            const canStart = (digits2 || digits3) && (remainderYes || remainderNo);

            const handleStartGame = () => {
                if (!canStart) return;
                setActiveConfig({
                    digits: [ ...(digits2 ? [2] : []), ...(digits3 ? [3] : []) ],
                    hasRemainderModes: [ ...(remainderYes ? [true] : []), ...(remainderNo ? [false] : []) ]
                });
                setGamePhase('playing');
            };

            const backToMenu = () => {
                setGamePhase('menu');
            };

            if (gamePhase === 'menu') {
                return (
                    <div className="min-h-screen bg-amber-50 font-sans flex flex-col items-center justify-center p-4">
                        <div className="bg-white p-8 rounded-3xl shadow-xl max-w-xl w-full border-b-8 border-amber-200">
                            <h1 className="text-3xl md:text-4xl font-black text-center text-gray-700 mb-6">
                                ğŸ˜ æ•¸å­¸æ‹”æ²³å¤§è³½
                            </h1>
                            
                            <div className="space-y-6">
                                {/* ç¬¬ä¸€æ’ï¼šä½æ•¸é¸æ“‡ */}
                                <div>
                                    <h3 className="text-lg font-bold text-gray-500 mb-3 flex items-center gap-2">
                                        <span className="w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center text-sm">1</span>
                                        é¸æ“‡è¢«é™¤æ•¸ä½æ•¸
                                    </h3>
                                    <div className="grid grid-cols-2 gap-4">
                                        <CheckboxCard 
                                            label="äºŒä½æ•¸ Ã· ä¸€ä½æ•¸" 
                                            checked={digits2} 
                                            onChange={() => setDigits2(!digits2)} 
                                        />
                                        <CheckboxCard 
                                            label="ä¸‰ä½æ•¸ Ã· ä¸€ä½æ•¸" 
                                            checked={digits3} 
                                            onChange={() => setDigits3(!digits3)} 
                                        />
                                    </div>
                                </div>

                                {/* ç¬¬äºŒæ’ï¼šé¤˜æ•¸é¸æ“‡ */}
                                <div>
                                    <h3 className="text-lg font-bold text-gray-500 mb-3 flex items-center gap-2">
                                        <span className="w-8 h-8 rounded-full bg-pink-100 text-pink-600 flex items-center justify-center text-sm">2</span>
                                        é¸æ“‡é¤˜æ•¸é¡å‹
                                    </h3>
                                    <div className="grid grid-cols-2 gap-4">
                                        <CheckboxCard 
                                            label="æœ‰é¤˜æ•¸" 
                                            subLabel="(ä¾‹: 7...2)"
                                            checked={remainderYes} 
                                            onChange={() => setRemainderYes(!remainderYes)} 
                                        />
                                        <CheckboxCard 
                                            label="æ²’æœ‰é¤˜æ•¸" 
                                            subLabel="(æ•´é™¤)"
                                            checked={remainderNo} 
                                            onChange={() => setRemainderNo(!remainderNo)} 
                                        />
                                    </div>
                                </div>

                                <div className="pt-4">
                                    <button 
                                        onClick={handleStartGame}
                                        disabled={!canStart}
                                        className={`w-full py-4 rounded-2xl text-xl font-bold shadow-lg transition-all transform active:scale-95 flex items-center justify-center gap-2
                                            ${canStart 
                                                ? 'bg-gradient-to-r from-amber-400 to-orange-500 text-white hover:from-amber-500 hover:to-orange-600 border-b-4 border-orange-700 active:border-b-0 active:translate-y-1' 
                                                : 'bg-gray-200 text-gray-400 cursor-not-allowed border-b-4 border-gray-300'}`}
                                    >
                                        {canStart ? 'é–‹å§‹æ‹”æ²³ï¼' : 'è«‹å‹¾é¸ä¸Šæ–¹é¸é …'}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            return <TugOfWarGame config={activeConfig} onBack={backToMenu} />;
        };

        // è‡ªå®šç¾©å‹¾é¸å¡ç‰‡çµ„ä»¶
        const CheckboxCard = ({ label, subLabel, checked, onChange }) => {
            return (
                <label className={`
                    relative cursor-pointer p-4 rounded-xl border-2 flex flex-col items-center justify-center gap-2 transition-all select-none
                    ${checked 
                        ? 'bg-amber-50 border-amber-400 text-amber-900 shadow-md' 
                        : 'bg-gray-50 border-gray-200 text-gray-500 hover:bg-gray-100'}
                `}>
                    <div className="absolute top-3 left-3">
                        <input 
                            type="checkbox" 
                            className="appearance-none w-6 h-6 border-2 border-gray-300 rounded bg-white checked:bg-amber-500 checked:border-amber-500 custom-checkbox transition-colors"
                            checked={checked}
                            onChange={onChange}
                        />
                    </div>
                    <div className="mt-1 text-lg font-bold text-center">{label}</div>
                    {subLabel && <div className="text-sm opacity-75">{subLabel}</div>}
                </label>
            );
        };

        // --- å¯¦éš›éŠæˆ²çµ„ä»¶ ---
        const TugOfWarGame = ({ config, onBack }) => {
            const GOAL_DIFFERENCE = 5;
            const BEAR_OFFSET = 160;
            const DELAY_MS = 500;
            
            const [score, setScore] = useState(0); 
            const [winner, setWinner] = useState(null); 
            const [isResetting, setIsResetting] = useState(false); 
            
            const emptyProblem = { 
                n1: 0, n2: 0, 
                ansQuotient: 0, ansRemainder: 0, 
                inputTen: '', inputUnit: '', inputRem: '', 
                isCorrect: false,
                hasRemainderBox: false // æ–°å¢ï¼šé€™é¡Œæ˜¯å¦é¡¯ç¤ºé¤˜æ•¸æ¡†
            };

            const [leftProblem, setLeftProblem] = useState(emptyProblem);
            const [rightProblem, setRightProblem] = useState(emptyProblem);

            const [leftFocus, setLeftFocus] = useState(null);
            const [rightFocus, setRightFocus] = useState(null);

            const leftTimerRef = useRef(null);
            const rightTimerRef = useRef(null);

            // ç”Ÿæˆé¡Œç›®é‚è¼¯
            const generateProblem = () => {
                // å¾ config ä¸­éš¨æ©ŸæŒ‘é¸è¦å‰‡
                const { digits: allowedDigits, hasRemainderModes } = config;

                // éš¨æ©Ÿé¸ä¸€å€‹ä½æ•¸æ¨¡å¼ (è‹¥åŒæ™‚å‹¾é¸2å’Œ3ï¼Œéš¨æ©ŸæŒ‘ä¸€å€‹)
                const digits = allowedDigits[Math.floor(Math.random() * allowedDigits.length)];
                // éš¨æ©Ÿé¸ä¸€å€‹é¤˜æ•¸æ¨¡å¼ (è‹¥åŒæ™‚å‹¾é¸æœ‰å’Œæ²’æœ‰ï¼Œéš¨æ©ŸæŒ‘ä¸€å€‹)
                const hasRemainder = hasRemainderModes[Math.floor(Math.random() * hasRemainderModes.length)];
                
                // 1. æ±ºå®šé™¤æ•¸ (2-9)
                const divisor = Math.floor(Math.random() * 8) + 2;

                // 2. æ±ºå®šå•†
                let minQuotient = 10;
                let maxQuotient = 99;

                if (digits === 2) {
                    // 2ä½æ•¸é™¤æ³•ï¼Œè¢«é™¤æ•¸ max 99
                    maxQuotient = Math.floor(99 / divisor);
                } else if (digits === 3) {
                    // 3ä½æ•¸é™¤æ³•ï¼Œè¢«é™¤æ•¸ min 100
                    minQuotient = Math.ceil(100 / divisor);
                }

                if (minQuotient > maxQuotient) {
                    minQuotient = 10;
                    maxQuotient = 99;
                }

                const quotient = Math.floor(Math.random() * (maxQuotient - minQuotient + 1)) + minQuotient;

                // 3. æ±ºå®šé¤˜æ•¸
                let remainder = 0;
                if (hasRemainder) {
                    // é¤˜æ•¸ç¯„åœ 1 ~ (é™¤æ•¸-1)
                    remainder = Math.floor(Math.random() * (divisor - 1)) + 1;
                }

                // 4. è¨ˆç®—è¢«é™¤æ•¸
                const dividend = (divisor * quotient) + remainder;

                return {
                    n1: dividend,
                    n2: divisor,
                    ansQuotient: quotient,
                    ansRemainder: remainder,
                    inputTen: '',
                    inputUnit: '',
                    inputRem: '',
                    isCorrect: false,
                    hasRemainderBox: hasRemainder // æ ¹æ“šé€™é¡Œæ˜¯å¦æœ‰é¤˜æ•¸éœ€æ±‚ä¾†æ±ºå®šé¡¯ç¤º
                };
            };

            useEffect(() => {
                resetGame();
                return () => {
                    if (leftTimerRef.current) clearTimeout(leftTimerRef.current);
                    if (rightTimerRef.current) clearTimeout(rightTimerRef.current);
                };
            }, []);

            const handleBackgroundClick = () => {
                setLeftFocus(null);
                setRightFocus(null);
            };

            const resetGame = () => {
                setIsResetting(true);
                if (leftTimerRef.current) clearTimeout(leftTimerRef.current);
                if (rightTimerRef.current) clearTimeout(rightTimerRef.current);

                setScore(0);
                setWinner(null);
                setLeftProblem(generateProblem());
                setRightProblem(generateProblem());
                setLeftFocus(null);
                setRightFocus(null);

                setTimeout(() => setIsResetting(false), 50);
            };

            const handleNumClick = (side, num) => {
                const isLeft = side === 'left';
                const problem = isLeft ? leftProblem : rightProblem;
                const setProblem = isLeft ? setLeftProblem : setRightProblem;
                const focus = isLeft ? leftFocus : rightFocus;
                const setFocus = isLeft ? setLeftFocus : setRightFocus;

                if (!focus || winner || problem.isCorrect) return;

                const newProb = { ...problem };
                if (focus.digit === 'ten') newProb.inputTen = num;
                else if (focus.digit === 'unit') newProb.inputUnit = num;
                else if (focus.digit === 'rem') newProb.inputRem = num;

                setProblem(newProb);
                setFocus(null);
                checkAnswer(side, newProb);
            };

            const checkAnswer = (side, problem) => {
                const { inputTen, inputUnit, inputRem, ansQuotient, ansRemainder, hasRemainderBox } = problem;
                
                if (inputTen === '' || inputUnit === '') return;
                if (hasRemainderBox && inputRem === '') return;

                const userQuotient = parseInt(`${inputTen}${inputUnit}`);
                
                let isCorrect = false;
                if (hasRemainderBox) {
                    const userRemainder = parseInt(inputRem);
                    if (userQuotient === ansQuotient && userRemainder === ansRemainder) {
                        isCorrect = true;
                    }
                } else {
                    if (userQuotient === ansQuotient) {
                        isCorrect = true;
                    }
                }

                if (isCorrect) {
                    handleCorrectAnswer(side);
                }
            };

            const handleCorrectAnswer = (side) => {
                let newScore = score + (side === 'right' ? 1 : -1);
                setScore(newScore);

                let isGameOver = false;
                if (newScore >= GOAL_DIFFERENCE) {
                    setWinner('right');
                    isGameOver = true;
                } else if (newScore <= -GOAL_DIFFERENCE) {
                    setWinner('left');
                    isGameOver = true;
                }

                const setProblem = side === 'left' ? setLeftProblem : setRightProblem;
                const setFocus = side === 'left' ? setLeftFocus : setRightFocus;
                const timerRef = side === 'left' ? leftTimerRef : rightTimerRef;

                setProblem(prev => ({ ...prev, isCorrect: true }));
                setFocus(null);

                if (!isGameOver) {
                    if (timerRef.current) clearTimeout(timerRef.current);
                    timerRef.current = setTimeout(() => {
                        setProblem(generateProblem());
                    }, DELAY_MS);
                }
            };

            const renderProblemArea = (side, problem, focus, setFocus) => {
                const isLeft = side === 'left';
                const color = isLeft ? 'blue' : 'pink';
                
                return (
                    <div className={`relative bg-white rounded-2xl shadow-xl p-4 md:p-6 w-full max-w-md border-4 transition-all duration-300 ${problem.isCorrect ? 'border-green-400 ring-4 ring-green-200' : `border-${color}-200`}`}>
                        <h2 className={`text-xl font-bold text-${color}-500 mb-4 text-center`}>{isLeft ? 'å·¦é‚Šå¤§è±¡éšŠ' : 'å³é‚Šå¤§è±¡éšŠ'}</h2>
                        
                        <div className="flex flex-wrap items-center justify-center gap-2 text-3xl md:text-4xl font-bold text-gray-700 mb-6">
                            <span>{problem.n1}</span>
                            <span>Ã·</span>
                            <span>{problem.n2}</span>
                            <span>=</span>
                        </div>
                        
                        <div className="flex items-center justify-center gap-2 relative">
                            <AnswerBox 
                                val={problem.inputTen} 
                                onClick={(e) => { e.stopPropagation(); !problem.isCorrect && setFocus({ digit: 'ten' }); }}
                                active={focus?.digit === 'ten'}
                                color={color}
                                isCorrect={problem.isCorrect}
                                small={problem.hasRemainderBox}
                            />
                            <AnswerBox 
                                val={problem.inputUnit} 
                                onClick={(e) => { e.stopPropagation(); !problem.isCorrect && setFocus({ digit: 'unit' }); }}
                                active={focus?.digit === 'unit'}
                                color={color}
                                isCorrect={problem.isCorrect}
                                small={problem.hasRemainderBox}
                            />

                            {/* åªæœ‰é€™é¡Œæœ‰é¤˜æ•¸æ™‚æ‰é¡¯ç¤º */}
                            {problem.hasRemainderBox && (
                                <>
                                    <span className="text-gray-400 font-bold mx-1">...</span>
                                    <AnswerBox 
                                        val={problem.inputRem} 
                                        onClick={(e) => { e.stopPropagation(); !problem.isCorrect && setFocus({ digit: 'rem' }); }}
                                        active={focus?.digit === 'rem'}
                                        color={color}
                                        isCorrect={problem.isCorrect}
                                        small={true}
                                    />
                                </>
                            )}
                        </div>

                        {focus && (
                            <MiniKeypad onNumClick={(num) => handleNumClick(side, num)} color={color} />
                        )}
                    </div>
                );
            };

            return (
                <div className="min-h-screen bg-amber-50 font-sans select-none flex flex-col overflow-y-auto pb-40" onClick={handleBackgroundClick}>
                    <div className="bg-white shadow-sm p-3 flex justify-between items-center relative z-20 shrink-0">
                        <button onClick={onBack} className="p-2 text-gray-500 hover:bg-gray-100 rounded-full flex items-center gap-1 text-sm font-bold">
                            <HomeIcon className="w-5 h-5" /> <span>é¸å–®</span>
                        </button>
                        <div className="text-center">
                            <h1 className="text-lg md:text-xl font-bold text-gray-700">
                                æ‹”æ²³æ¯”è³½ä¸­
                            </h1>
                        </div>
                        <div className="w-20"></div>
                    </div>

                    <div className="h-40 relative w-full bg-sky-100/30 border-b-4 border-amber-200/50 overflow-hidden shrink-0 z-10">
                        <div className="w-full h-2 bg-amber-800/20 absolute bottom-4 left-0"></div>
                        <div className="absolute top-0 bottom-4 left-1/2 w-0.5 bg-red-400/50 transform -translate-x-1/2 z-0"></div>
                        <div className="absolute bottom-4 left-1/2 w-2 h-6 bg-red-300 transform -translate-x-1/2 z-0"></div>
                        <div 
                            className={`absolute bottom-8 left-1/2 w-0 h-24 ${isResetting ? '' : 'transition-all duration-700 ease-in-out'}`}
                            style={{ transform: `translateX(calc(-50% + ${(score * (BEAR_OFFSET / GOAL_DIFFERENCE))}px))` }} 
                        >
                            <div className="absolute top-1/2 left-[-400px] right-[-400px] h-3 bg-amber-700 rounded-full shadow-sm w-[800px]"></div>
                            <div className="absolute top-1/2 left-1/2 w-8 h-8 bg-red-500 rounded-full border-4 border-white transform -translate-x-1/2 -translate-y-1/2 shadow-md z-10"></div>
                            <div className="absolute top-1/2 flex items-center justify-center text-6xl filter drop-shadow-lg animate-bounce-slow"
                                style={{ width: '80px', height: '80px', left: '50%', marginLeft: `-${BEAR_OFFSET}px`, transform: 'translate(-50%, -50%) scaleX(1)', '--scale-x': '1' }}>
                                ğŸ˜
                            </div>
                            <div className="absolute top-1/2 flex items-center justify-center text-6xl filter drop-shadow-lg animate-bounce-slow"
                                style={{ width: '80px', height: '80px', left: '50%', marginLeft: `${BEAR_OFFSET}px`, transform: 'translate(-50%, -50%) scaleX(-1)', '--scale-x': '-1' }}>
                                ğŸ˜
                            </div>
                        </div>
                    </div>

                    <div className="flex-1 flex flex-row relative items-stretch">
                        <div className={`flex-1 p-2 md:p-4 flex flex-col items-center justify-start pt-6 md:pt-10 transition-colors duration-300 ${winner === 'left' ? 'bg-blue-100' : 'bg-blue-50'}`}>
                            {renderProblemArea('left', leftProblem, leftFocus, setLeftFocus)}
                        </div>
                        <div className="w-1 bg-gray-200 z-0"></div>
                        <div className={`flex-1 p-2 md:p-4 flex flex-col items-center justify-start pt-6 md:pt-10 transition-colors duration-300 ${winner === 'right' ? 'bg-pink-100' : 'bg-pink-50'}`}>
                            {renderProblemArea('right', rightProblem, rightFocus, setRightFocus)}
                        </div>
                    </div>

                    {winner && (
                        <div className="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 animate-fade-in">
                            <div className="bg-white rounded-3xl p-8 max-w-md w-full text-center shadow-2xl transform scale-100 animate-pop-in">
                                <div className="text-6xl mb-4 animate-bounce">ğŸ˜</div>
                                <h2 className={`text-4xl font-black mb-2 ${winner === 'left' ? 'text-blue-500' : 'text-pink-500'}`}>
                                    {winner === 'left' ? 'å·¦é‚Šå¤§è±¡' : 'å³é‚Šå¤§è±¡'} ç²å‹ï¼
                                </h2>
                                <div className="flex justify-center mb-6"><Trophy className="w-16 h-16 text-yellow-400" /></div>
                                <div className="flex gap-4">
                                    <button onClick={onBack} className="flex-1 py-3 bg-gray-200 text-gray-700 font-bold rounded-xl hover:bg-gray-300 transition-all">
                                        å›é¸å–®
                                    </button>
                                    <button onClick={resetGame} className="flex-1 py-3 bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-bold rounded-xl shadow-lg hover:from-yellow-500 hover:to-orange-600 transition-all flex items-center justify-center gap-2">
                                        <RefreshCcw className="w-5 h-5" /> å†ç©ä¸€æ¬¡
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>