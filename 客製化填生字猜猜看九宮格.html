<!doctype html>
<html lang="zh-TW">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è‡ªè¨‚ç”Ÿå­—9å®®æ ¼çŒœè¬éŠæˆ²</title>
  <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', 'å¾®è»Ÿæ­£é»‘é«”', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            padding: 20px;
            color: white;
            gap: 30px;
            box-sizing: border-box;
        }

        /* å·¦å´æ§åˆ¶å€ */
        .control-panel {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
            width: 300px;
            max-height: 90vh;
            transition: all 0.3s ease;
            z-index: 10;
            position: relative;
        }

        .panel-title {
            font-size: 1.3rem;
            font-weight: bold;
            text-align: center;
            color: #ffeaa7;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            margin-bottom: 5px;
        }

        .input-wrapper {
            position: relative;
            width: 100%;
            z-index: 5;
        }

        .input-area {
            width: 100%;
            height: 300px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 10px;
            padding: 15px;
            padding-bottom: 50px; /* é ç•™åº•éƒ¨ç©ºé–“çµ¦æŒ‰éˆ• */
            border: 2px solid transparent;
            font-family: 'Microsoft JhengHei', sans-serif;
            font-size: 1.1rem;
            resize: vertical;
            color: #333;
            transition: all 0.3s;
            z-index: 1;
        }

        .input-area:focus {
            outline: none;
            border-color: #ffeaa7;
            box-shadow: 0 0 10px rgba(255, 234, 167, 0.5);
        }
        
        /* éŠæˆ²é€²è¡Œä¸­ï¼Œè¼¸å…¥æ¡†è®Šæš—çš„æ¨£å¼ */
        .input-area.masked {
            background: rgba(255, 255, 255, 0.2);
            color: rgba(255,255,255,0.8);
            text-align: center;
            padding-top: 100px;
            font-style: italic;
            pointer-events: none; /* ç¦æ­¢é»æ“Š */
        }

        .instruction {
            font-size: 0.9rem;
            color: #dfe6e9;
            line-height: 1.4;
            background: rgba(0,0,0,0.2);
            padding: 10px;
            border-radius: 10px;
        }

        .action-btn {
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
        }

        .btn-start {
            background: linear-gradient(135deg, #ffeaa7, #fdcb6e);
            color: #2d3436;
            box-shadow: 0 4px 10px rgba(253, 203, 110, 0.3);
        }

        .btn-start:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(253, 203, 110, 0.5);
        }

        .btn-edit {
            background: #ff7675;
            color: white;
            border: none;
            box-shadow: 0 4px 10px rgba(214, 48, 49, 0.3);
        }

        .btn-edit:hover {
            background: #d63031;
            transform: translateY(-2px);
        }
        
        .btn-clear {
            position: absolute;
            bottom: 15px;
            right: 15px;
            background: #dfe6e9;
            border: 1px solid #b2bec3;
            color: #636e72;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.95rem;
            z-index: 100; /* ç¢ºä¿å±¤ç´šæœ€é«˜ */
            transition: all 0.2s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .btn-clear:hover {
            background: #d63031;
            color: white;
            border-color: #d63031;
            transform: translateY(-1px);
        }
        .btn-clear:active {
            transform: translateY(1px);
        }

        /* å³å´éŠæˆ²å€ */
        .main-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex-grow: 1;
            max-width: 600px;
            transition: opacity 0.3s ease;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .question-counter {
            color: #ffeaa7;
            font-weight: bold;
            font-size: 1.2rem;
            display: block;
            margin-top: 5px;
        }

        .game-container {
            position: relative;
            width: 320px;
            height: 320px;
            margin: 10px auto;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .character-card {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: normal;
            color: #2d3436;
            font-family: 'æ¨™æ¥·é«”', 'DFKai-SB', serif;
            line-height: 1; 
            text-align: center;
            user-select: none;
            transition: opacity 0.2s; /* æ–‡å­—åˆ‡æ›æ™‚çš„æ·¡å…¥æ·¡å‡º */
        }

        .overlay-grid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            grid-template-rows: 1fr 1fr 1fr;
            gap: 0;
            z-index: 5;
        }

        .overlay-block {
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .overlay-block:hover {
            filter: brightness(1.1);
            z-index: 2;
        }

        .overlay-block:active {
            transform: scale(0.95);
        }

        .overlay-block.clicked {
            opacity: 0;
            pointer-events: none;
            transform: scale(0.8);
        }

        /* ä¹å®®æ ¼é¡è‰² */
        .block-1 { background: linear-gradient(135deg, #ff6b6b, #ee5a24); }
        .block-2 { background: linear-gradient(135deg, #4ecdc4, #44a08d); }
        .block-3 { background: linear-gradient(135deg, #ffeaa7, #fdcb6e); }
        .block-4 { background: linear-gradient(135deg, #a29bfe, #6c5ce7); }
        .block-5 { background: linear-gradient(135deg, #fd79a8, #e84393); }
        .block-6 { background: linear-gradient(135deg, #fab1a0, #e17055); }
        .block-7 { background: linear-gradient(135deg, #00b894, #00cec9); }
        .block-8 { background: linear-gradient(135deg, #fdcb6e, #e17055); }
        .block-9 { background: linear-gradient(135deg, #74b9ff, #0984e3); }

        .block-number {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(0,0,0,0.2);
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }

        .game-controls {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        .btn-primary {
            background: #ffeaa7;
            color: #2d3436;
        }
        .btn-primary:hover { background: #fdcb6e; transform: translateY(-2px); }

        .btn-secondary {
            background: white;
            color: #6c5ce7;
        }
        .btn-secondary:hover { background: #f1f2f6; transform: translateY(-2px); }

        .btn-danger {
            background: #ff7675;
            color: white;
        }
        .btn-danger:hover { background: #d63031; transform: translateY(-2px); }


        .completion-message {
            background: rgba(46, 213, 115, 0.95);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-top: 20px;
            backdrop-filter: blur(5px);
            display: none;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            z-index: 20;
        }

        .completion-message.show {
            display: block;
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes popIn {
            from { opacity: 0; transform: scale(0.8) translateY(20px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }

        /* ç‹€æ…‹åˆ‡æ›é¡åˆ¥ */
        .hidden {
            display: none !important;
        }

        .disabled-area {
            pointer-events: none;
            opacity: 0.6;
            background: rgba(255,255,255,0.5);
        }

        @media (max-width: 768px) {
            body {
                flex-direction: column;
                padding: 10px;
                gap: 15px;
            }

            .control-panel {
                width: 100%;
                padding: 15px;
            }
            
            .input-area {
                height: 150px;
            }

            .game-container {
                width: 280px;
                height: 280px;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .main-content {
                width: 100%;
            }
        }
    </style>
 </head>
 <body>
  
  <!-- å·¦å´è¨­å®šé¢æ¿ -->
  <div class="control-panel" id="controlPanel">
    <div class="panel-title">ğŸ“ é¡Œç›®è¨­å®š</div>
    
    <div class="instruction">
        <strong>ä½¿ç”¨èªªæ˜ï¼š</strong><br>
        è«‹åœ¨ä¸‹æ–¹è¼¸å…¥ç”Ÿå­—ï¼Œä¸€è¡Œä¸€å€‹ã€‚<br>
        <em>æç¤ºï¼šé»ã€Œæ¸…ç©ºã€å¯å¿«é€Ÿæ¸…é™¤ã€‚</em>
    </div>

    <div class="input-wrapper">
        <textarea id="vocabInput" class="input-area" placeholder="åœ¨æ­¤è¼¸å…¥ç”Ÿå­—...
ä¾‹å¦‚ï¼š
éš™
ç«„
æ—¨">
éš™
ç«„
æ—¨</textarea>
        <button type="button" id="clearBtn" class="btn-clear" onclick="clearInput()">ğŸ—‘ï¸ æ¸…ç©º</button>
    </div>

    <button id="startBtn" class="action-btn btn-start" onclick="startGame()">
        <span>â–¶ï¸ é–‹å§‹éŠæˆ²</span>
    </button>

    <div id="gameStatus" class="instruction hidden" style="text-align: center; background: rgba(0,0,0,0.4);">
        éŠæˆ²é€²è¡Œä¸­...
    </div>

    <button id="editBtn" class="action-btn btn-edit hidden" onclick="enableEditing()">
        <span>âœï¸ ä¿®æ”¹é¡Œç›® / é‡æ–°è¨­å®š</span>
    </button>
  </div>

  <!-- å³å´éŠæˆ²å€ -->
  <div class="main-content hidden" id="gameArea">
   <div class="header">
    <h1>ğŸ² ç”Ÿå­—ä¹å®®æ ¼çŒœè¬</h1>
    <span id="questionCounter" class="question-counter">(ç¬¬ 1 é¡Œ / å…± ? é¡Œ)</span>
   </div>
   
   <div class="game-container">
    <div class="character-card" id="charDisplay">
     ?
    </div>
    <div class="overlay-grid" id="grid">
     <!-- ç¶²æ ¼ç”± JS ç”Ÿæˆ -->
    </div>
   </div>

   <div class="game-controls">
    <button class="btn btn-danger" onclick="resetCurrentRound()">ğŸ”„ é‡ç½®æœ¬é¡Œ</button>
    <button class="btn btn-primary" onclick="revealAll()">ğŸ‘ï¸ çœ‹ç­”æ¡ˆ</button>
    <button class="btn btn-secondary" id="btnNext" onclick="nextQuestion()">ğŸ² ä¸‹ä¸€é¡Œ</button>
   </div>

   <div class="completion-message" id="completionMessage">
    <!-- å®Œæˆè¨Šæ¯ç”± JS ç”Ÿæˆ -->
   </div>
  </div>

  <script>
        // éŠæˆ²ç‹€æ…‹
        let gameData = [];
        let currentIndex = 0;
        let shuffledIndices = [];
        let revealedBlocks = new Set();
        let isTransitioning = false; // é˜²æ­¢é‡è¤‡é»æ“Š
        let savedInputContent = ""; // æš«å­˜ä½¿ç”¨è€…è¼¸å…¥çš„å…§å®¹
        const totalBlocks = 9;

        // DOM å…ƒç´ 
        const vocabInput = document.getElementById('vocabInput');
        const gameArea = document.getElementById('gameArea');
        const controlPanel = document.getElementById('controlPanel');
        const editBtn = document.getElementById('editBtn');
        const startBtn = document.getElementById('startBtn');
        const gameStatus = document.getElementById('gameStatus');
        const grid = document.getElementById('grid');
        const charDisplay = document.getElementById('charDisplay');
        const msgBox = document.getElementById('completionMessage');
        const clearBtn = document.getElementById('clearBtn');
        const btnNext = document.getElementById('btnNext');

        // ç¢ºä¿æ¸…ç©ºåŠŸèƒ½åœ¨å…¨åŸŸç¯„åœ
        window.clearInput = function() {
            if(confirm("ç¢ºå®šè¦æ¸…ç©ºæ‰€æœ‰å…§å®¹å—ï¼Ÿ")) {
                vocabInput.value = "";
                vocabInput.focus();
            }
        };

        // åˆå§‹åŒ–ç¶²æ ¼
        function initGrid() {
            grid.innerHTML = '';
            for(let i=1; i<=9; i++) {
                const div = document.createElement('div');
                div.className = `overlay-block block-${i}`;
                div.onclick = () => revealBlock(i);
                div.innerHTML = `<div class="block-number">${i}</div><div>é»æˆ‘</div>`;
                grid.appendChild(div);
            }
        }

        // è§£æè¼¸å…¥è³‡æ–™
        function parseInput() {
            const rawText = vocabInput.value.trim();
            if (!rawText) {
                alert("è«‹å…ˆè¼¸å…¥ä¸€äº›ç”Ÿå­—ï¼");
                return false;
            }

            const lines = rawText.split('\n');
            gameData = [];

            lines.forEach(line => {
                line = line.trim();
                if (line) {
                    const parts = line.split(/[,ï¼Œ\s]+/); 
                    const char = parts[0];
                    const meaning = parts.slice(1).join(' ') || 'å°šç„¡æç¤º';
                    
                    if (char) {
                        gameData.push({ char, meaning });
                    }
                }
            });

            if (gameData.length === 0) {
                alert("ç„¡æ³•è§£æç”Ÿå­—ï¼Œè«‹æª¢æŸ¥æ ¼å¼ã€‚");
                return false;
            }

            return true;
        }

        // é–‹å§‹éŠæˆ²
        function startGame() {
            if (!parseInput()) return;

            // 1. æš«å­˜è¼¸å…¥å…§å®¹
            savedInputContent = vocabInput.value;

            // 2. éš±è—è¼¸å…¥æ¡†å…§å®¹ï¼Œé˜²æ­¢å­¸ç”Ÿå·çœ‹
            vocabInput.value = "ğŸ™ˆ éŠæˆ²é€²è¡Œä¸­\nç”Ÿå­—æ¸…å–®å·²éš±è—";
            vocabInput.classList.add('masked'); // å¢åŠ ç‰¹æ®Šæ¨£å¼
            vocabInput.readOnly = true; // è¨­ç‚ºå”¯è®€

            // UI åˆ‡æ›
            startBtn.classList.add('hidden');
            gameStatus.classList.remove('hidden');
            editBtn.classList.remove('hidden');
            clearBtn.style.display = 'none'; // éŠæˆ²ä¸­éš±è—æ¸…ç©ºæŒ‰éˆ•
            
            // é¡¯ç¤ºéŠæˆ²å€
            gameArea.classList.remove('hidden');
            
            // åœ¨æ‰‹æ©Ÿç‰ˆï¼Œè‡ªå‹•æ²å‹•åˆ°éŠæˆ²å€
            if(window.innerWidth <= 768) {
                gameArea.scrollIntoView({behavior: 'smooth'});
            }

            // éŠæˆ²åˆå§‹åŒ–
            initGrid();
            initializeRandomOrder();
        }

        // å•Ÿç”¨ç·¨è¼¯æ¨¡å¼
        function enableEditing() {
            gameArea.classList.add('hidden');
            
            // 1. æ¢å¾©åŸæœ¬è¼¸å…¥çš„å…§å®¹
            if (savedInputContent) {
                vocabInput.value = savedInputContent;
            }
            
            // 2. ç§»é™¤é®è”½æ¨£å¼èˆ‡ç‹€æ…‹
            vocabInput.classList.remove('masked');
            vocabInput.readOnly = false;
            vocabInput.classList.remove('disabled-area');

            startBtn.classList.remove('hidden');
            gameStatus.classList.add('hidden');
            editBtn.classList.add('hidden');
            clearBtn.style.display = 'block'; // æ¢å¾©æ¸…ç©ºæŒ‰éˆ•é¡¯ç¤º
            
            vocabInput.focus();
            
            if(window.innerWidth <= 768) {
                controlPanel.scrollIntoView({behavior: 'smooth'});
            }
        }

        // åˆå§‹åŒ–éš¨æ©Ÿé †åº
        function initializeRandomOrder() {
            shuffledIndices = Array.from({length: gameData.length}, (_, i) => i);
            for (let i = shuffledIndices.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffledIndices[i], shuffledIndices[j]] = [shuffledIndices[j], shuffledIndices[i]];
            }
            currentIndex = 0;
            loadQuestion(false); // ç¬¬ä¸€æ¬¡è¼‰å…¥ä¸éœ€è¦å»¶é²
        }

        // è¼‰å…¥é¡Œç›® (å¢åŠ  delayed åƒæ•¸)
        function loadQuestion(delayed = false) {
            // 1. å…ˆé‡ç½®ç¶²æ ¼ (è“‹èµ·ä¾†) - è®“ä½¿ç”¨è€…çœ‹åˆ°è“‹èµ·ä¾†çš„éç¨‹
            resetCurrentRound();
            msgBox.classList.remove('show');
            isTransitioning = true; // é–å®šæŒ‰éˆ•

            if (gameData.length === 0) return;

            if (delayed) {
                // å¦‚æœéœ€è¦å»¶é² (é»ä¸‹ä¸€é¡Œæ™‚)
                btnNext.disabled = true; // æš«æ™‚åœç”¨æŒ‰éˆ•
                btnNext.innerText = "æº–å‚™ä¸­...";
                
                setTimeout(() => {
                    updateCharacterData(); // 1ç§’å¾Œæ‰æ›å­—
                    btnNext.disabled = false;
                    btnNext.innerText = "ğŸ² ä¸‹ä¸€é¡Œ";
                    isTransitioning = false;
                }, 1000); // 1ç§’å»¶é²ï¼Œæ­¤æ™‚ç¶²æ ¼å·²ç¶“è“‹ä¸Šï¼Œå­¸ç”Ÿçœ‹åˆ°çš„æ˜¯è“‹è‘—çš„èˆŠå­—ï¼Œç„¶å¾Œè®Šæˆè“‹è‘—çš„æ–°å­—
            } else {
                // å¦‚æœæ˜¯å‰›é–‹å§‹æˆ–é‡ç½®ï¼Œç«‹å³é¡¯ç¤º
                updateCharacterData();
                isTransitioning = false;
            }
        }

        // å¯¦éš›æ›´æ–°æ–‡å­—èˆ‡å­—é«”å¤§å°
        function updateCharacterData() {
            const data = gameData[shuffledIndices[currentIndex]];
            
            // è¨­å®šæ–‡å­—
            charDisplay.textContent = data.char;
            
            // å­—é«”å¤§å°èª¿æ•´ (æ¥µå¤§åŒ–)
            const len = data.char.length;
            if (len === 1) charDisplay.style.fontSize = '19.5rem'; 
            else if (len === 2) charDisplay.style.fontSize = '9.5rem'; 
            else if (len === 3) charDisplay.style.fontSize = '6.5rem';
            else charDisplay.style.fontSize = '4.5rem';

            // æ‰‹æ©Ÿç‰ˆå­—é«”å¾®èª¿
            if (window.innerWidth <= 768) {
                if (len === 1) charDisplay.style.fontSize = '15rem';
                else if (len === 2) charDisplay.style.fontSize = '8rem';
                else charDisplay.style.fontSize = '5rem';
            }

            // æ›´æ–°è¨ˆæ•¸å™¨
            document.getElementById('questionCounter').textContent = 
                `(ç¬¬ ${currentIndex + 1} é¡Œ / å…± ${gameData.length} é¡Œ)`;
        }

        // é»æ“Šæ–¹å¡Š
        function revealBlock(n) {
            if (isTransitioning) return; // åˆ‡æ›é¡Œç›®ä¸­ä¸èƒ½é»
            
            const block = document.querySelector(`.block-${n}`);
            if (block && !block.classList.contains('clicked')) {
                block.classList.add('clicked');
                revealedBlocks.add(n);

                if (revealedBlocks.size === totalBlocks) {
                    setTimeout(showCompletion, 500);
                }
            }
        }

        // é¡¯ç¤ºå…¨éƒ¨
        function revealAll() {
            for(let i=1; i<=9; i++) {
                const block = document.querySelector(`.block-${i}`);
                if(block) block.classList.add('clicked');
                revealedBlocks.add(i);
            }
            setTimeout(showCompletion, 300);
        }

        // é‡ç½®æœ¬é¡Œ
        function resetCurrentRound() {
            revealedBlocks.clear();
            const blocks = document.querySelectorAll('.overlay-block');
            blocks.forEach(b => b.classList.remove('clicked'));
            msgBox.classList.remove('show');
        }

        // ä¸‹ä¸€é¡Œ
        function nextQuestion() {
            if (isTransitioning) return; // é˜²æ­¢é€£é»

            currentIndex++;
            if (currentIndex >= gameData.length) {
                if(confirm("é¡Œç›®å·²å…¨éƒ¨å®Œæˆï¼è¦é‡æ–°é–‹å§‹å—ï¼Ÿ")) {
                    initializeRandomOrder();
                } else {
                    currentIndex = gameData.length - 1;
                }
            } else {
                // é€™è£¡å‚³å…¥ trueï¼Œè¡¨ç¤ºéœ€è¦å»¶é²æ›å­—
                loadQuestion(true);
            }
        }

        // é¡¯ç¤ºå®Œæˆè¨Šæ¯
        function showCompletion() {
            const data = gameData[shuffledIndices[currentIndex]];
            msgBox.innerHTML = `
                <h2>ğŸ‰ ç­”å°äº†ï¼</h2>
                <div style="margin: 10px 0;">
                    <div style="font-size: 3rem; color: #2d3436; font-family: 'æ¨™æ¥·é«”';">${data.char}</div>
                    <div style="font-size: 1.2rem; color: white; margin-top: 5px;">${data.meaning}</div>
                </div>
                <div>
                    <button class="btn btn-primary" onclick="resetCurrentRound()">å†ç©ä¸€æ¬¡</button>
                    <button class="btn btn-secondary" onclick="nextQuestion()">ä¸‹ä¸€é¡Œ â¡ï¸</button>
                </div>
            `;
            msgBox.classList.add('show');
        }

        // éµç›¤æ”¯æ´
        document.addEventListener('keydown', (e) => {
            if (gameArea.classList.contains('hidden')) return;
            if (document.activeElement === vocabInput) return;
            if (isTransitioning) return;

            const key = e.key;
            if (key >= '1' && key <= '9') revealBlock(parseInt(key));
            if (key === ' ' || key === 'Enter') {
                e.preventDefault();
                revealAll();
            }
            if (key === 'n' || key === 'N') nextQuestion();
            if (key === 'r' || key === 'R') resetCurrentRound();
        });

  </script>
 </body>
</html>